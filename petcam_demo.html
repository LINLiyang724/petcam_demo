<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PetGuard Dev Demo</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script type="importmap">
    {
      "imports": {
        "react": "https://esm.sh/react@18.2.0",
        "react-dom/client": "https://esm.sh/react-dom@18.2.0/client",
        "lucide-react": "https://esm.sh/lucide-react@0.344.0"
      }
    }
    </script>

    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        .scrollbar-hide::-webkit-scrollbar { display: none; }
        .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .animate-fade-in { animation: fadeIn 0.3s ease-out; }
        @keyframes slideDown { from { transform: translateY(-100%); } to { transform: translateY(0); } }
        .animate-slide-down { animation: slideDown 0.5s cubic-bezier(0.16, 1, 0.3, 1); }
    </style>
</head>
<body class="bg-gray-50">
    <div id="root"></div>

    <script type="text/babel" data-type="module">
        import React, { useState, useEffect, useRef } from 'react';
        import { createRoot } from 'react-dom/client';
        import { 
            Activity, Bell, Settings, AlertTriangle, Clock, X, 
            Sparkles, Utensils, Moon, Footprints, 
            Wifi, Battery, ChevronRight, Edit2, Shield, Droplets, Calendar, 
            ChevronLeft, Play, PlayCircle, Video, Film, Coffee, Zap
        } from 'lucide-react';

        // ==========================================
        // ğŸ”§ é…ç½®åŒºåŸŸ
        // ==========================================

        const CONFIG = {
            currentDate: "11/24", 
            alertTriggerTime: 14000, // 14ç§’ (æ¯«ç§’)
        };

        // ğŸ± çŒ«å’ªæ¡£æ¡ˆ
        const PET_DATA = {
            'æ —å­': { 
                type: 'ç‹¸èŠ±çŒ«', weight: '4.2kg',
                avatarColor: 'bg-gray-200 text-gray-700',
                report: `**ã€æ —å­æ—¥æŠ¥ã€‘**\nä»Šæ—¥æ ‡ç­¾ï¼š**ç²¾åŠ›è¿‡å‰©**ã€‚\n06:30 è¿›è¡Œäº†é«˜å¼ºåº¦çš„**æ´»åŠ¨**ï¼ˆè·‘é…·ï¼‰ã€‚å…¨å¤©**é¥®é£Ÿé¥®æ°´**æ­£å¸¸ã€‚æ³¨æ„ï¼š23:09 æ£€æµ‹åˆ°**å¤šçŒ«äº’åŠ¨**ï¼ˆè¿½é€ï¼‰ã€‚`
            },
            'å¥¶æ²¹': { 
                type: 'é‡‘æ¸å±‚é•¿æ¯›', weight: '5.5kg',
                avatarColor: 'bg-yellow-100 text-yellow-700',
                report: `**ã€å¥¶æ²¹æ—¥æŠ¥ã€‘**\nä»Šæ—¥æ ‡ç­¾ï¼š**å²æœˆé™å¥½**ã€‚\nå¤§éƒ¨åˆ†æ—¶é—´å¤„äº**ä¼‘æ¯**çŠ¶æ€ã€‚09:40 è¿›è¡Œäº†**é¥®é£Ÿé¥®æ°´**ã€‚æ™šé—´è¢«åŠ¨å‚ä¸äº†ä¸€æ¬¡**å¤šçŒ«äº’åŠ¨**ã€‚`
            }
        };

        // ğŸ¨ äº‹ä»¶æ ·å¼å®šä¹‰ (ç”¨äºæ—¶é—´è½´èŠ‚ç‚¹)
        const getEventStyle = (action) => {
            if (action === 'å¤šçŒ«äº’åŠ¨' || action === 'å‘•å') {
                return {
                    bg: 'bg-orange-50', border: 'border-orange-100', 
                    text: 'text-orange-700', iconColor: 'text-orange-500',
                    iconBg: 'bg-orange-500', icon: <AlertTriangle size={14} className="text-white"/>
                };
            }
            return {
                bg: 'bg-white', border: 'border-blue-50', 
                text: 'text-gray-600', iconColor: 'text-blue-400',
                iconBg: 'bg-blue-50', icon: <Clock size={14} className="text-blue-400"/>
            };
        };

        // ğŸ¨ å°é¢å›¾æ ‡å®šä¹‰ (ç”¨äºè§†é¢‘ç¼©ç•¥å›¾å ä½)
        const getThumbIcon = (action) => {
             if (action.includes('é¥®é£Ÿ')) return <Utensils size={24}/>;
             if (action.includes('ä¼‘æ¯')) return <Moon size={24}/>;
             if (action.includes('æ´»åŠ¨') || action.includes('è·‘é…·')) return <Zap size={24}/>;
             if (action.includes('äº’åŠ¨')) return <Activity size={24}/>;
             return <Film size={24}/>;
        }

        // ğŸ“… æ—¥å†æ•°æ®ç”Ÿæˆ (ä¿®æ”¹ï¼šç”Ÿæˆè¿‡å»30å¤©)
        const generateCalendarData = () => {
            const days = [];
            const today = new Date(2025, 10, 24); // 2025-11-24
            const weekMap = ['æ—¥', 'ä¸€', 'äºŒ', 'ä¸‰', 'å››', 'äº”', 'å…­'];
            
            for (let i = 29; i >= 0; i--) {
                const d = new Date(today);
                d.setDate(d.getDate() - i);
                days.push({
                    fullDate: `${d.getMonth() + 1}/${d.getDate()}`,
                    day: String(d.getDate()),
                    week: weekMap[d.getDay()],
                    isToday: i === 0
                });
            }
            return days;
        };

        const CALENDAR_DAYS = generateCalendarData();

        // ğŸ“ æ—¥å¿—ç”Ÿæˆå™¨ (å…¨é‡æ¨¡æ‹Ÿè§†é¢‘æ ·å¼ï¼Œä½¿ç”¨ä¸°å¯Œæ–‡æ¡ˆ)
        const getHistoryLogs = (date) => {
            
            // æ¨¡æ‹Ÿä¸åŒæ—¥æœŸæ•°æ®å·®å¼‚
            if (date === '11/24') {
                return [
                    { 
                        id: '1', 
                        time: '14:30', 
                        cat: 'å¥¶æ²¹', 
                        act: ["æ´»åŠ¨", "å¤šçŒ«äº’åŠ¨"], 
                        desc: "å¥¶æ²¹åœ¨å®¢å…åœ°é¢æ‚ é—²åœ°å·¡è§†äº†ä¸€åœˆï¼Œéšåè½»å¿«åœ°è·³ä¸ŠçŒ«çˆ¬æ¶ï¼Œå¹¶æŠ¬å¤´çœ‹å‘é«˜å¤„çš„åŒä¼´ã€‚", 
                        stat: "çŠ¶æ€éå¸¸æ´»æ³¼ï¼Œæ¢ç´¢æ¬²æ»¡æ»¡ï¼Œæ˜¯ä¸ªå……æ»¡å¥½å¥‡å¿ƒçš„å°å¯çˆ±ã€‚", 
                        thumbColor: 'bg-yellow-50 text-yellow-500', 
                        videoTime: 10 
                    },
                    { 
                        id: '2', 
                        time: '14:28', 
                        cat: 'æ —å­', 
                        act: ["ä¼‘æ¯", "å¤šçŒ«äº’åŠ¨"], 
                        desc: "æ —å­ä¸€ç›´ç¨³ç¨³åœ°è¶´åœ¨çŒ«çˆ¬æ¶çš„é«˜å±‚çªé‡Œï¼Œä¿¯ç°ç€ä¸‹æ–¹æ´»åŠ¨çš„åŒä¼´ï¼Œç¥æƒ…æ·¡å®šè‡ªè‹¥ã€‚", 
                        stat: "æƒ…ç»ªç¨³å®šä¸”æ”¾æ¾ï¼Œåƒæ˜¯åœ¨äº«å—å®ƒçš„åˆåé™è°§æ—¶å…‰ï¼ŒçŠ¶æ€å¾ˆå¥½ã€‚", 
                        thumbColor: 'bg-gray-100 text-gray-500', 
                        videoTime: 10 
                    },
                    { 
                        id: '3', 
                        time: '09:40', 
                        cat: 'å¥¶æ²¹', 
                        act: ["é¥®é£Ÿé¥®æ°´"], 
                        desc: "é¥®æ°´æœºå‰åœç•™ï¼Œé¥®æ°´é‡çº¦ 45mlï¼Œé¥®æ°´é¢‘ç‡æ­£å¸¸ã€‚", 
                        stat: "AIåˆ¤å®šï¼šæ­£å¸¸è¡¥æ°´", 
                        thumbColor: 'bg-blue-50 text-blue-400', 
                        videoTime: 10 
                    },
                    { 
                        id: '4', 
                        time: '08:15', 
                        cat: 'åŒçŒ«', 
                        act: ["é¥®é£Ÿé¥®æ°´"], 
                        desc: "è‡ªåŠ¨å–‚é£Ÿå™¨å‡ºç²®ï¼ŒåŒçŒ«åŒæ—¶è¿›é£Ÿï¼Œæœªå‘ç”ŸæŠ¤é£Ÿè¡Œä¸ºã€‚", 
                        stat: "AIåˆ¤å®šï¼šè¿›é£Ÿ", 
                        thumbColor: 'bg-green-100 text-green-500', 
                        videoTime: 10 
                    }, 
                    { 
                        id: '5', 
                        time: '06:30', 
                        cat: 'æ —å­', 
                        act: ["æ´»åŠ¨"], 
                        desc: "æ£€æµ‹åˆ°é«˜é¢‘ç§»åŠ¨ï¼ˆè·‘é…·ï¼‰ï¼ŒæŒç»­æ—¶é—´çº¦ 5 åˆ†é’Ÿã€‚", 
                        stat: "AIåˆ¤å®šï¼šé«˜èƒ½è¿åŠ¨", 
                        thumbColor: 'bg-red-50 text-red-400', 
                        videoTime: 10 
                    }
                ];
            }

            if (date === '11/23') return [
                { id: '23-1', time: '23:15', cat: 'å¥¶æ²¹', act: ["å‘•å"], desc: "æ£€æµ‹åˆ°è…¹éƒ¨æŠ½æï¼Œåå‡ºæ¯›çƒã€‚", stat: "âš ï¸ å¼‚å¸¸æ£€æµ‹ï¼šç–‘ä¼¼å‘•å", thumbColor: 'bg-red-100 text-red-500', videoTime: 10 },
                { id: '23-2', time: '14:20', cat: 'åŒçŒ«', act: ["ä¼‘æ¯"], desc: "åˆåå°æ†©ï¼Œç¯å¢ƒå®‰é™ã€‚", stat: "çŠ¶æ€ï¼šæ”¾æ¾", thumbColor: 'bg-blue-50 text-blue-400', videoTime: 10 },
                { id: '23-3', time: '08:00', cat: 'æ —å­', act: ["é¥®é£Ÿé¥®æ°´"], desc: "æ­£å¸¸æ—©é¤ã€‚", stat: "çŠ¶æ€ï¼šæ­£å¸¸", thumbColor: 'bg-green-50 text-green-500', videoTime: 10 }
            ];
            
            // éšæœºç”Ÿæˆ (ç®€å•çš„æ´—ç‰Œæ¨¡æ‹Ÿ)
            return [
                { id: `${date}-1`, time: '18:00', cat: 'åŒçŒ«', act: ["é¥®é£Ÿé¥®æ°´"], desc: "æ™šé¤æ—¶é—´ï¼ŒåŒçŒ«è¿›é£Ÿã€‚", stat: "AIåˆ¤å®šï¼šè¿›é£Ÿ", thumbColor: 'bg-green-50 text-green-500', videoTime: 10 },
                { id: `${date}-2`, time: '14:00', cat: 'å¥¶æ²¹', act: ["ä¼‘æ¯"], desc: "åœ¨çŒ«çˆ¬æ¶ç¡è§‰ã€‚", stat: "AIåˆ¤å®šï¼šä¼‘æ¯", thumbColor: 'bg-yellow-50 text-yellow-500', videoTime: 10 },
                { id: `${date}-3`, time: '09:00', cat: 'æ —å­', act: ["æ´»åŠ¨"], desc: "æŠ“æ¿ç£¨çˆªã€‚", stat: "AIåˆ¤å®šï¼šæ—¥å¸¸", thumbColor: 'bg-gray-50 text-gray-500', videoTime: 10 }
            ];
        };

        const formatText = (text) => {
            if (!text) return null;
            return text.split(/(\*\*.*?\*\*)/g).map((part, i) => 
                part.startsWith('**') ? <strong key={i} className="font-bold text-indigo-700">{part.slice(2, -2)}</strong> : part
            );
        };

        function App() {
          const [activeTab, setActiveTab] = useState('timeline');
          const [selectedDate, setSelectedDate] = useState(CONFIG.currentDate);
          const [currentLogs, setCurrentLogs] = useState([]);
          const [selectedCatFilter, setSelectedCatFilter] = useState('all'); 
          const [pushNotification, setPushNotification] = useState(null);
          const [hasTriggered, setHasTriggered] = useState(false);
          const [playModal, setPlayModal] = useState(false); // ä»…åšUIå±•ç¤ºç”¨

          const scrollContainerRef = useRef(null);

          // åˆå§‹åŒ–åŠ è½½æ•°æ®
          useEffect(() => {
              setCurrentLogs(getHistoryLogs(selectedDate));
          }, [selectedDate]);

          // è‡ªåŠ¨æ»šåŠ¨æ—¥å†åˆ°ä»Šå¤©
          useEffect(() => {
            if (scrollContainerRef.current) {
                scrollContainerRef.current.scrollLeft = scrollContainerRef.current.scrollWidth;
            }
          }, []);

          // â° æ ¸å¿ƒé€»è¾‘ï¼š14ç§’å®šæ—¶æ¨¡æ‹Ÿ Push (ä¸ä¾èµ–è§†é¢‘æ–‡ä»¶)
          useEffect(() => {
            const timer = setTimeout(() => {
                if (!hasTriggered) {
                    setHasTriggered(true);
                    
                    // 1. å¼¹å‡º Push
                    setPushNotification({
                        title: 'æ£€æµ‹åˆ°å¤šçŒ«äº’åŠ¨',
                        text: 'åˆšåˆšï¼šæ —å­å’Œå¥¶æ²¹åœ¨å®¢å…å‘ç”Ÿè¿½é€è¡Œä¸ºã€‚'
                    });
                    setTimeout(() => setPushNotification(null), 6000);

                    // 2. åªæœ‰åœ¨çœ‹â€œä»Šå¤©â€æ—¶ï¼Œæ‰æ’å…¥æ–°æ—¥å¿—
                    if (selectedDate === CONFIG.currentDate) {
                        const newLog = { 
                            id: 'realtime-alert', time: '23:09', cat: 'åŒçŒ«', 
                            act: ["å¤šçŒ«äº’åŠ¨"], desc: 'ã€å®æ—¶ã€‘æ£€æµ‹åˆ°æ·±å¤œè·‘é…·è¿½é€ï¼ŒåŒæ–¹åœ¨å®¢å…å¿«é€Ÿç§»åŠ¨ã€‚', stat: "AIåˆ¤å®šï¼šé«˜èƒ½ç©è€",
                            thumbColor: 'bg-gray-800 text-white', videoTime: 10
                        };
                        setCurrentLogs(prev => [newLog, ...prev]);
                    }
                }
            }, CONFIG.alertTriggerTime);

            return () => clearTimeout(timer);
          }, [hasTriggered, selectedDate]);

          const TabButton = ({ id, icon: Icon, label }) => (
            <button onClick={() => setActiveTab(id)} className={`flex flex-col items-center justify-center w-full py-2 transition-colors ${activeTab === id ? 'text-orange-600' : 'text-gray-400'}`}>
              <Icon size={24} className={`mb-1 ${activeTab === id ? 'scale-110' : ''} transition-transform`} />
              <span className="text-[10px] font-medium">{label}</span>
            </button>
          );

          return (
            <div className="bg-gray-50 min-h-screen font-sans text-gray-900 pb-20 relative max-w-md mx-auto shadow-2xl overflow-hidden border-x border-gray-200 flex flex-col">
              
              {/* Push Notification */}
              {pushNotification && (
                <div onClick={() => setPlayModal(true)} className="fixed top-4 left-4 right-4 bg-white/95 backdrop-blur-md rounded-2xl shadow-xl z-[60] border-l-4 border-orange-500 p-4 animate-slide-down cursor-pointer flex items-start gap-3 ring-1 ring-black/5">
                   <div className="bg-orange-100 p-2 rounded-full text-orange-600 flex-shrink-0 mt-0.5"><AlertTriangle size={20} /></div>
                   <div className="flex-1 min-w-0">
                     <div className="flex justify-between items-start"><h4 className="font-bold text-gray-900 text-sm">PetGuard æ™ºèƒ½è­¦æŠ¥</h4><span className="text-[10px] text-gray-400">åˆšåˆš</span></div>
                     <p className="font-medium text-gray-800 text-xs mt-1 truncate">{pushNotification.title}</p>
                     <p className="text-gray-500 text-[10px] mt-0.5 line-clamp-2">{pushNotification.text}</p>
                   </div>
                </div>
              )}

              {/* æ¨¡æ‹Ÿæ’­æ”¾å™¨å¼¹çª— (UI Only) */}
              {playModal && (
                <div className="fixed inset-0 z-[70] bg-black flex flex-col justify-center items-center animate-fade-in" onClick={() => setPlayModal(false)}>
                    <div className="text-white text-center">
                        <PlayCircle size={64} className="mx-auto mb-4 opacity-80"/>
                        <p className="text-lg font-bold">è§†é¢‘æ’­æ”¾å™¨ UI æ¼”ç¤º</p>
                        <p className="text-sm text-gray-400 mt-2">æ­¤å¤„å°†åŠ è½½ .mp4 è§†é¢‘æµ</p>
                        <div className="mt-8 flex gap-4 justify-center text-xs text-gray-500">
                             <span className="flex items-center gap-1"><X size={14}/> ç‚¹å‡»ä»»æ„å¤„å…³é—­</span>
                        </div>
                    </div>
                </div>
              )}

              {/* ======= Tab 1: æ—¥æŠ¥ (Timeline) ======= */}
              {activeTab === 'timeline' && (
                <div className="flex-1 bg-gray-50 overflow-y-auto flex flex-col">
                   {/* Calendar Header (Fixed & Scrollable with custom scrollbar) */}
                   <div className="bg-white px-4 pt-4 pb-3 border-b border-gray-100 sticky top-0 z-20 shadow-sm">
                      <div className="flex justify-between items-center mb-3">
                          <h2 className="text-xl font-bold text-gray-900">PetGuard æ—¥å¿—</h2>
                          <div className="flex bg-gray-100 rounded-lg p-0.5">
                             {['all', 'æ —å­', 'å¥¶æ²¹'].map(filter => (
                               <button key={filter} onClick={() => setSelectedCatFilter(filter)} className={`px-3 py-1 text-xs rounded-md transition-all ${selectedCatFilter === filter ? 'bg-white text-orange-600 shadow-sm font-medium' : 'text-gray-500'}`}>{filter === 'all' ? 'å…¨éƒ¨' : filter}</button>
                             ))}
                          </div>
                      </div>
                      {/* æ¨ªå‘æ»šåŠ¨æ—¥å† */}
                      <div className="flex gap-2 overflow-x-auto pb-2 custom-scrollbar" ref={scrollContainerRef}>
                          {CALENDAR_DAYS.map(d => (
                              <button 
                                key={d.fullDate} 
                                onClick={() => setSelectedDate(d.fullDate)} 
                                className={`flex-shrink-0 w-10 h-12 rounded-xl flex flex-col items-center justify-center border transition-all ${selectedDate === d.fullDate ? 'bg-orange-500 border-orange-500 text-white shadow-md' : 'bg-white border-gray-100 text-gray-400'}`}
                              >
                                  <span className="text-[9px] opacity-80">{d.week}</span>
                                  <span className="text-xs font-bold">{d.day}</span>
                              </button>
                          ))}
                      </div>
                   </div>

                   <div className="p-4 space-y-6">
                      {/* Daily Report Card */}
                      <div className="space-y-3">
                         {(selectedCatFilter === 'all' || selectedCatFilter === 'æ —å­') && (
                             <div className="bg-white p-4 rounded-xl border border-orange-100 shadow-sm relative overflow-hidden animate-fade-in">
                                <div className="flex items-center gap-2 mb-2">
                                    <div className="w-5 h-5 rounded-full bg-gray-200 flex items-center justify-center text-[10px] font-bold text-gray-600">æ —</div>
                                    <span className="font-bold text-sm text-gray-800">æ —å­</span>
                                </div>
                                <div className="text-xs text-gray-600 leading-relaxed whitespace-pre-line">{formatText(PET_DATA['æ —å­'].report)}</div>
                             </div>
                         )}
                         {(selectedCatFilter === 'all' || selectedCatFilter === 'å¥¶æ²¹') && (
                             <div className="bg-white p-4 rounded-xl border border-yellow-100 shadow-sm relative overflow-hidden animate-fade-in">
                                <div className="flex items-center gap-2 mb-2">
                                    <div className="w-5 h-5 rounded-full bg-yellow-100 flex items-center justify-center text-[10px] font-bold text-yellow-700">å¥¶</div>
                                    <span className="font-bold text-sm text-gray-800">å¥¶æ²¹</span>
                                </div>
                                <div className="text-xs text-gray-600 leading-relaxed whitespace-pre-line">{formatText(PET_DATA['å¥¶æ²¹'].report)}</div>
                             </div>
                         )}
                      </div>

                      {/* Timeline List */}
                      <div>
                          <h3 className="text-xs font-bold text-gray-400 mb-4 uppercase tracking-wider flex items-center justify-between">
                              <span>äº‹ä»¶æ—¶é—´è½´</span>
                              <span className="font-normal">{currentLogs.length} æ¡è®°å½•</span>
                          </h3>
                          <div className="space-y-6 relative before:absolute before:left-[15px] before:top-2 before:bottom-0 before:w-0.5 before:bg-gray-200">
                             {currentLogs
                               .filter(log => selectedCatFilter === 'all' || log.cat.includes(selectedCatFilter) || (log.cat === 'åŒçŒ«' && selectedCatFilter !== 'all'))
                               .map(log => {
                                 const style = getEventStyle(log.act[0]);
                                 const isImportant = log.act.includes('å‘•å') || log.act.includes('å¤šçŒ«äº’åŠ¨');

                                 return (
                                   <div key={log.id} className="relative pl-8 group animate-fade-in">
                                      {/* Timeline Dot */}
                                      <div className={`absolute left-0 top-3 w-8 h-8 rounded-full border-4 border-white shadow-sm flex items-center justify-center z-10 ${style.iconBg}`}>
                                         {style.icon}
                                      </div>
                                      
                                      <div className="bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden">
                                         {/* Video Thumbnail Area (All Events have this now) */}
                                         <div onClick={() => setPlayModal(true)} className={`w-full h-32 relative cursor-pointer group/vid ${log.thumbColor}`}>
                                             <div className="absolute inset-0 bg-black/5 group-hover/vid:bg-black/10 transition-colors"></div>
                                             {/* Thumbnail Icon */}
                                             <div className="absolute inset-0 flex items-center justify-center opacity-30 group-hover/vid:opacity-40 transition-opacity">
                                                 {getThumbIcon(log.act[0])}
                                             </div>
                                             
                                             {/* Play Button Overlay */}
                                             <div className="absolute inset-0 flex items-center justify-center">
                                                 <div className="w-10 h-10 bg-white/30 backdrop-blur-md rounded-full flex items-center justify-center shadow-lg transition-transform group-hover/vid:scale-110">
                                                     <Play size={18} className="text-white fill-current ml-0.5" />
                                                 </div>
                                             </div>
                                             <div className="absolute bottom-2 right-2 flex items-center gap-1 text-[10px] text-white font-medium bg-black/40 px-2 py-1 rounded backdrop-blur-sm">
                                                 <Video size={10} /> è§†é¢‘å›æ”¾
                                             </div>
                                         </div>

                                         {/* Content Body */}
                                         <div className="p-3">
                                             <div className="flex justify-between items-start mb-2">
                                                 <div className="flex flex-col">
                                                     <div className="flex items-center gap-2 mb-1">
                                                         <span className="font-bold text-sm text-gray-800">{log.cat}</span>
                                                         <span className="text-xs text-gray-400 font-mono">{log.time}</span>
                                                     </div>
                                                     {/* Tags */}
                                                     <div className="flex gap-1 flex-wrap">
                                                         {log.act.map((tag, i) => {
                                                             const isAlert = tag.includes('äº’åŠ¨') || tag.includes('å‘•å');
                                                             return <span key={i} className={`text-[10px] px-1.5 py-0.5 rounded border ${isAlert ? 'bg-orange-50 text-orange-600 border-orange-100' : 'bg-gray-50 text-gray-600 border-gray-100'}`}>{tag}</span>
                                                         })}
                                                     </div>
                                                 </div>
                                             </div>
                                             
                                             <p className="text-xs text-gray-700 leading-relaxed mb-3">{log.desc}</p>
                                             
                                             {/* AI Status */}
                                             <div className="bg-gray-50 rounded-lg p-2 flex items-start gap-2">
                                                 <div className="mt-0.5"><Sparkles size={12} className="text-indigo-400"/></div>
                                                 <p className="text-[10px] text-gray-500 leading-snug">
                                                     {log.stat}
                                                 </p>
                                             </div>
                                         </div>
                                      </div>
                                   </div>
                                 );
                             })}
                             
                             {currentLogs.filter(log => selectedCatFilter === 'all' || log.cat.includes(selectedCatFilter) || (log.cat === 'åŒçŒ«' && selectedCatFilter !== 'all')).length === 0 && (
                                 <div className="text-center py-10 text-gray-400 text-xs">æš‚æ— è®°å½•</div>
                             )}
                          </div>
                      </div>
                   </div>
                </div>
              )}

              {/* ======= Tab 2: è®¾ç½® (Settings) ======= */}
              {activeTab === 'settings' && (
                <div className="flex-1 bg-gray-50 overflow-y-auto">
                    <div className="bg-white px-6 py-8 border-b border-gray-100"><h2 className="text-2xl font-bold text-gray-900 mb-1">è®¾ç½®</h2><p className="text-sm text-gray-500">ç®¡ç†æ‚¨çš„è®¾å¤‡ä¸å® ç‰©æ¡£æ¡ˆ</p></div>
                    <div className="p-4 space-y-6">
                        <section>
                            <div className="flex justify-between items-center mb-3 px-1"><h3 className="text-sm font-bold text-gray-700 uppercase tracking-wide">æˆ‘çš„å® ç‰©</h3><button className="text-xs text-orange-600 font-medium hover:text-orange-700">ç¼–è¾‘</button></div>
                            <div className="space-y-3">
                                <div className="bg-white p-4 rounded-xl shadow-sm border border-gray-100 flex items-center justify-between"><div className="flex items-center gap-4"><div className="w-12 h-12 rounded-full bg-gray-200 text-gray-700 flex items-center justify-center text-lg font-bold shadow-inner">æ —</div><div><div className="font-bold text-gray-900">æ —å­</div><div className="text-xs text-gray-500 mt-0.5">ç‹¸èŠ±çŒ« Â· 4.2kg</div></div></div></div>
                                <div className="bg-white p-4 rounded-xl shadow-sm border border-gray-100 flex items-center justify-between"><div className="flex items-center gap-4"><div className="w-12 h-12 rounded-full bg-yellow-100 text-yellow-700 flex items-center justify-center text-lg font-bold shadow-inner">å¥¶</div><div><div className="font-bold text-gray-900">å¥¶æ²¹</div><div className="text-xs text-gray-500 mt-0.5">é‡‘æ¸å±‚é•¿æ¯› Â· 5.5kg</div></div></div></div>
                            </div>
                        </section>
                        <section>
                            <h3 className="text-sm font-bold text-gray-700 uppercase tracking-wide mb-3 px-1">é€šç”¨è®¾ç½®</h3>
                            <div className="bg-white rounded-xl shadow-sm border border-gray-100 divide-y divide-gray-50">
                                <div className="p-4 flex items-center justify-between"><div className="flex items-center gap-3"><div className="bg-blue-50 p-2 rounded-lg text-blue-600"><Wifi size={18}/></div><span className="text-sm font-medium text-gray-700">è®¾å¤‡è¿æ¥</span></div><div className="text-xs text-green-500 font-medium">åœ¨çº¿</div></div>
                                <div className="p-4 flex items-center justify-between"><div className="flex items-center gap-3"><div className="bg-orange-50 p-2 rounded-lg text-orange-600"><Bell size={18}/></div><span className="text-sm font-medium text-gray-700">æ™ºèƒ½é€šçŸ¥</span></div><div className="w-8 h-5 bg-orange-500 rounded-full relative"><div className="absolute top-1 right-1 w-3 h-3 bg-white rounded-full"></div></div></div>
                            </div>
                        </section>
                        <div className="text-center text-xs text-gray-400 py-4">PetGuard Dev Reference v1.0</div>
                    </div>
                </div>
              )}

              {/* Bottom Nav */}
              <div className="fixed bottom-0 left-0 right-0 bg-white/95 backdrop-blur-xl border-t border-gray-200 flex justify-around items-center px-6 pb-safe pt-1 max-w-md mx-auto z-40 h-[65px] shadow-[0_-1px_10px_rgba(0,0,0,0.02)]">
                  <TabButton id="timeline" icon={Activity} label="æ—¥æŠ¥" />
                  <TabButton id="settings" icon={Settings} label="è®¾ç½®" />
              </div>
            </div>
          );
        }

        const root = createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
